# Python Metrics Scraper

# Installation

## System Requirements

On Linux (including Raspbian) ensure at least Python 3.7 is installed.

```shell
python3 --version
```

Next, install pip, and virtualenv

```shell
sudo apt-get install python3-pip
pip3 install virtualenv
```

On Mac OS:

```shell
brew install python3
pip3 install virtualenv
```

## Install the software (RPi)

Create an installation directory under opt and install a Python environment into it

_These instructions assume an installation directory of /opt/tarpn. However, the software can be installed at any location_

```shell
sudo mkdir /opt/tarpn
sudo chown pi:pi /opt/tarpn
python3 -m virtualenv /opt/tarpn
```

Install a development build

```shell
/opt/tarpn/bin/pip install --upgrade --index-url https://pypi.mumrah.synology.me/simple tarpn-bdd
```

## Configuration

A sample config file is provided in /opt/tarpn/config/bdd.ini.sample

```ini
; Do not edit this file. Make a copy named bdd.ini and edit that one.

[default]
log.dir = /opt/tarpn/logs
log.config = config/logging.ini
serial.port = /dev/ttyUSB0
serial.speed = 9600
```

## Systemd Service (Optional)

```shell
sudo cp /opt/tarpn/tarpn-bdd-scraper.service /etc/systemd/system/tarpn-bdd-scraper.service
sudo systemctl enable tarpn-bdd-scraper
sudo systemctl start tarpn-bdd-scraper
```
